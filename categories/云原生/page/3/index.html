<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/www6vCloudNative/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=www6vCloudNative/livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">
  <meta property="og:site_name" content="Cloud Native">
  <meta property="og:title" content="云原生">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<title>云原生 | Cloud Native</title>
<link rel="icon" href="/www6vCloudNative/favicon.png" >
<link rel="manifest" href="/www6vCloudNative/manifest.json">
<link rel="canonical" href="http://localhost:1313/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">
<link rel="stylesheet" href="/www6vCloudNative/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css" integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin="anonymous">
  <script defer src="/www6vCloudNative/fuse.min.js"></script>
  <script defer src="/www6vCloudNative/en.search.min.88487f5c85e0fcac35ab03d645c71fb463adc540323a90bc857ae85b847c6bfa.js" integrity="sha256-iEh/XIXg/Kw1qwPWRccftGOtxUAyOpC8hXroW4R8a/o=" crossorigin="anonymous"></script>

  

<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/index.xml" title="Cloud Native" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/www6vCloudNative/"><span>Cloud Native</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <span>编排原理</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vCloudNative/docs/orchestrate/k8sDeployment/" class="">Kubernetes Deployment</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vCloudNative/docs/orchestrate/k8sResource/" class="">Kubernetes Workload</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vCloudNative/docs/orchestrate/k8sStatefulSet/" class="">Kubernetes StatefulSet原理和源码</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vCloudNative/docs/orchestrate/k8sResouceModel/" class="">Kubenetes资源模型</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vCloudNative/docs/orchestrate/k8sPLEG/" class="">kubelet和PLEG</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/www6vCloudNative/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>云原生</h3>

  <label for="toc-control">
    
    <img src="/www6vCloudNative/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          <span>39</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/security/">Security</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/metric/">Metric</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/KV/">KV</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/ceph/">Ceph</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/kernel/">Kernel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/linux/">Linux</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%8F%82%E6%95%B0/">参数</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/prometheus/">Prometheus</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/linux/">Linux</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sSecurityPractice/">Kubernetes 安全实践</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 16, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>, 
      <a href="/www6vCloudNative/categories/security/">Security</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Microsoft的Kubernetes attack matrix [1] # Kubernetes attack matrix-enhancement [2] # 初始访问 # ● API Server 未授权访问 [5]
API Server 作为 K8s 集群的管理入口，通常使用 8080 和 6443 端口，其中 8080 端口无需认证，6443端口需要认证且有 TLS 保护。如果开发者使用 8080 端口，并将其暴露在公网上，攻击者就可以通过该端口的 API，直接对集群下发指令。
另一种场景是运维人员配置不当，将&quot;system:anonymous&quot;用户绑定到&quot;cluster-admin&quot;用户组，从而使6443端口允许匿名用户以管理员权限向集群内部下发指令。
● kubelet 未授权访问 [5]
● Docker Daemon 公网暴露
● K8s configfile 泄露
K8s configfile 作为 K8s 集群的管理凭证，其中包含有关 K8s 集群的详细信息（API Server、登录凭证）。 如果攻击者能够访问到此文件(如办公网员工机器入侵、泄露到 Github的代码等)，就可以直接通过 API Server 接管 K8s 集群，带来风险隐患。 拿到K8s configfile完整利用流程
K8s configfile &ndash;&gt; 创建后门Pod/挂载主机路径 &ndash;&gt; 通过Kubectl 进入容器 &ndash;&gt; 利用挂载目录逃逸。 执行 # ● 利用Service Account 容器内部默认携带 K8s Service Account的认证凭据,路径为：/run/secrets/kubernetes.
        <a href="/www6vCloudNative/ref/cloudNative/k8sSecurityPractice/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sCKS/">Kubernetes CKS</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 15, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>, 
      <a href="/www6vCloudNative/categories/security/">Security</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Cluster Setup - 10% # Securing a Cluster # 使用网络安全策略来限制集群级别的访问 Use Network security policies to restrict cluster level access 使用CIS基准检查Kubernetes组件(etcd, kubelet, kubedns, kubeapi)的安全配置 Use CIS benchmark to review the security configuration of Kubernetes components (etcd, kubelet, kubedns, kubeapi) Kube-bench - Checks whether Kubernetes is deployed securely by running the checks documented ain the CIS Kubernetes Benchmark. 正确设置带有安全控制的Ingress对象 Properly set up Ingress objects with security control 保护节点元数据和端点 Protect node metadata and endpoints Using Kubernetes network policy to restrict pods access to cloud metadata This example assumes AWS cloud, and metadata IP address is 169.
        <a href="/www6vCloudNative/ref/cloudNative/k8sCKS/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sRook/">Kubernetes Rook</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 12, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>目录 # Rook for ceph # Rook建立Ceph集群流程[1] # rook的crd建立好之后，
Rook的operator会把rook的控制面建立出来
然后把storageclass和csi driver都注册好。
用户只要建立pvc，pvc里指定用哪个storageclass，然后csi driver会去工作。
Rook cluster installation [2][3] [I] # Ceph存储类型 # Block FileSystem Object Block Storage [4][5] [II] # install apiVersion: ceph.rook.io/v1 kind: CephBlockPool metadata: name: replicapool namespace: rook-ceph spec: failureDomain: host replicated: size: 3 --- apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: rook-ceph-block # Change &#34;rook-ceph&#34; provisioner prefix to match the operator namespace if needed provisioner: rook-ceph.rbd.csi.ceph.com parameters: # clusterID is the namespace where the rook cluster is running clusterID: rook-ceph # Ceph pool into which the RBD image shall be created pool: replicapool .
        <a href="/www6vCloudNative/ref/cloudNative/k8sRook/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sDNS/">Kubernetes CoreDNS</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 12, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>
CoreDNS插件架构 # github中
Kubernetes DNS # Kubernetes服务发现 自定义域名解析 # hosts: 存量代码域名调用 rewrite: 集群外服务调用 forward： 配置存根域 CoreDNS 部署架构 # kubesphere.local prod.kubesphere.local dev.kubesphere.local qa.kubesphere.local test.kubesphere.local reference: # 【Meetup 分享】使用 KubeSphere &amp; CoreDNS 搭建云原生 DNS 详解 DNS 与 CoreDNS 的实现原理 未 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sPaaS/">Kubernetes PaaS平台</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 12, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>/ OpenShift KubeSphere 网络 ovs(openshift SDN), flannel, calico calico, flannel, QinCloud CNI, Porter 存储 Ceph,NFS NeonSAN， QingCloud-csi，Ceph-csi CI/CD OCP Pipeline/Tekton
s2i Pipeline, Jenkins, sonarqube
s2i 微服务 istio istio ingress HA Proxy openELB infa(多云) kvm,openstack,aws,GCP,azure
marketplace OpenPitrix(aws, aliyun, openstack) Service Catelog operatorhub 无 serverless knative openfunction(基于knative) 多集群 solo、 kubefed(二开) 参考 # 青云官网
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sOpenShift/">Kubernetes OpenShift</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 5, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Interface # CNI
OpenFlow(OVS)(使用的， 更通用，场景适合的更多)
Calico CRI OpenShift3.0 用的
Docker（有守护进程，守护进程宕掉后，运行时会有问题）
Red Hat Enterprise Linux - 4G大小 OpenShift4.0 用的
CRI-O（没有守护进程）
Ret Hat CoreOS - 不到800M大小 CSI
CEPH(ROOK)
NFS 入口 ingress openshift 默认是haproxy的ingress（首选建议使用， dns解析， mTLS） 也可以装nginx ingress 也可以装istio ingress gateway（4层选， istio ingress gateway） PaaS # 角色 - RBAC
配置管理 - LimitRanage， Quota
联邦集群 - kubefed
对K8S的增强 # Operator Multus多个虚拟网卡（用的多）
一个pod有多个虚拟网卡， ovs管理网络 + macvlan网络（性能比较好） kube-virt 虚拟机管理 应用迁移 # 应用改造的难度比较大 多云 # 基于多云的CI/CD # 基于jenkins
        <a href="/www6vCloudNative/ref/cloudNative/k8sOpenShift/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sHA/">K8S高可用-控制面</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 2, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>
控制面 高可用 # 控制平面组件划分单独节点； 控制平面所在节点，应该确保在不同机架上； 保证控制平面的每个组件有足够的CPU、内存和磁盘资源； 减少或消除外部依赖； Cloud Provider API 核心组件以普通Pod形式加载运行时， 可能会调度到任意工作节点。 控制面 高可用方案 # [1] [2]
架构图 # load balancer 虚ip
controller-manager： 用lease来实现controller-manager和scheduler的leader election
参考: # Options for Highly Available topology Creating Highly Available clusters with kubeadm 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8s-operator/">Kubernetes Operator-kubebuilder</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>December 30, 2021</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>目录 # 使用kubebuilder构建Operator的过程 # 自己定义DaemonSet Operator包括： 在每个node上启动一个Pod（CRD + Controller） webhook(证书 + mutation + validation) Step1: init project # Create a kubebuilder project, which requires an empty folder # kubebuilder init --domain cncamp.io Check project layout # cat PROJECT domain: cncamp.io layout: - go.kubebuilder.io/v3 projectName: mysts repo: github.com/www6v/demo-operator version: &#34;3&#34; Step2: Create CRD and Controller # Create API, create resource[Y], create controller[Y] # kubebuilder create api --group apps --version v1beta1 --kind MyDaemonset edit api/v1alpha1/simplestatefulset_types.
        <a href="/www6vCloudNative/ref/cloudNative/k8s-operator/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sMultiTenancy/">Kubernetes 多租户</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>October 18, 2021</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>一. 概念和原则 # 租户是指一组拥有访问特定软件资源权限的用户集合，在多租户环境中，它还包括共享的应用、服务、数据和各项配置等。 多租户集群必须将租户彼此隔离 集群须在租户之间公平的分配集群资源。 二. Overview # 软隔离：在这种情况下，我们有一个企业，不同的团队访问同一个集群，这需要较少的安全开销，因为用户可以相互信任。
硬隔离：当 Kubernetes 暴露给具有独立且完全不受信任的用户的多个企业时，这是必需的。
方案B 软隔离 - hierarchical-namespaces
https://github.com/kubernetes-sigs/hierarchical-namespaces Kubernetes 的层级命名空间介绍
方案C 硬隔离 - virtualcluster
https://github.com/kubernetes-sigs/cluster-api-provider-nested/tree/main/virtualcluster
三. 方案B 解决方案 # 1. 认证 # 识别访问的用户是谁 K8s可管理2类用户 ServiceAccount
是存在于K8s中的虚拟账户;
原生支持的动态认证; 用户认证
webhook是和企业认证平台集成的重要手段 2. 授权 # 3. 隔离 # 节点隔离
Taints和Toleration机制
[Kubernetes 调度 - 污点和容忍度详解] (https://mp.weixin.qq.com/s/rza4euQCLuMLTI5fHdj67Q)
Taint 和 Toleration（污点和容忍）
网路隔离 NetworkPolicy 网路策略 - 实质上也是iptables规则
网络策略通过网络插件来实现，所以必须使用一种支持 NetworkPolicy 的网络方案（如 calico）—— 非 Controller 创建的资源，是不起作用的。
容器隔离
5种隔离机制
        <a href="/www6vCloudNative/ref/cloudNative/k8sMultiTenancy/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vCloudNative/ref/cloudNative/k8sAbandonDocker/">K8S 弃用Docker</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vCloudNative/svg/calendar.svg" class="book-icon " alt="" />
    <span>June 1, 2021</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>
1. # 如果以 kubelet 调用 CRI 为起点，OCI 的 runC 调用为终点，三种模式经历的可执行程序分别是：
dockershim 模式：dockershim(*)-&gt;dockd-&gt;containerd-&gt;containerd-shim
cri-containerd 模式：cri-containerd(*)-&gt; containerd-&gt;containerd-shim
cri-o 模式：cri-o
K8S弃用Docker是指弃用Docker daemon
RedHat 推崇的 cri-o → Podman
2. # 容器引擎可选的替代方案大概有以下几种：
containerd CRI-O → Podman, Red Hat gVisor → “guest 内核”层 kata-containers → 安全 Nabla 参考： # https://www.infoq.cn/article/VasFWOChD6JoL5avhfAz https://www.zhihu.com/question/433184969 
    </p>
  </article>
  

  
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/2/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/4/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/4/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          <span>39</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/security/">Security</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/metric/">Metric</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/KV/">KV</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/ceph/">Ceph</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/kernel/">Kernel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/linux/">Linux</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/categories/%E5%8F%82%E6%95%B0/">参数</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/prometheus/">Prometheus</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vCloudNative/tags/linux/">Linux</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












