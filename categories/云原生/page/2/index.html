<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://www6v.github.io/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">
  <meta property="og:site_name" content="Cloud Native">
  <meta property="og:title" content="云原生">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<title>云原生 | Cloud Native</title>
<link rel="icon" href="/www6vKubernetes/favicon.png" >
<link rel="manifest" href="/www6vKubernetes/manifest.json">
<link rel="canonical" href="https://www6v.github.io/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">
<link rel="stylesheet" href="/www6vKubernetes/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css" integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin="anonymous">
  <script defer src="/www6vKubernetes/fuse.min.js"></script>
  <script defer src="/www6vKubernetes/en.search.min.320cd3caf336d9cce42769640494bf9fe482b08eaec0df754d503d194a89eebe.js" integrity="sha256-MgzTyvM22czkJ2lkBJS/n&#43;SCsI6uwN91TVA9GUqJ7r4=" crossorigin="anonymous"></script>

  

<link rel="alternate" type="application/rss+xml" href="https://www6v.github.io/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/index.xml" title="Cloud Native" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/www6vKubernetes/"><span>Cloud Native</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <span>Kubernetes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <span>编排原理</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/orchestrate/k8sDeployment/" class="">Kubernetes Deployment</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/orchestrate/k8sResource/" class="">Kubernetes Workload</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/orchestrate/k8sStatefulSet/" class="">Kubernetes StatefulSet原理和源码</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/orchestrate/k8sResouceModel/" class="">Kubenetes资源模型</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/orchestrate/k8sPLEG/" class="">kubelet和PLEG</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Operator &amp; Controller</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/OperatorController/k8s-operator/" class="">Kubernetes Operator-kubebuilder</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/OperatorController/k8sOperator/" class="">Kubernetes Operator-Etcd</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/OperatorController/k8sDeclarativeAPI/" class="">Kubernetes声明式API</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/OperatorController/k8sOperator-redis/" class="">Kubernetes Operator-Redis</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/OperatorController/k8sAdmissionWebhook/" class="">K8s  AdmissionWebhook</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Container Runtime</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Container-Runtime/k8sRuntime/" class="">Kubernetes Runtime</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Container-Runtime/k8sAbandonDocker/" class="">K8S 弃用Docker</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>网络</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sNetwork/" class="">Kubernetes网络</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sCalico/" class="">Calico</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sCalico1/" class="">Calico</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>服务和DNS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/ServicesDNS/k8sService/" class="">Kubernetes服务</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/ServicesDNS/k8sDNS/" class="">Kubernetes CoreDNS</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/ServicesDNS/k8sIngressNginx/" class="">Kubernetes Nginx Ingress</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>存储</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Storage/k8sStorage/" class="">Kubernetes存储</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Storage/k8sRook/" class="">Kubernetes Rook</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Storage/ceph/" class="">Ceph 总结</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Storage/etcd/" class="">etcd 总结</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>调度</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Schedule/k8sScheduler/" class="">Kubernetes调度器</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Schedule/k8sAdvancedScheduling/" class="">Kubernetes 高级调度</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>监控和AutoScale</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/MonitorAutoScale/k8sAutoScale/" class="">Kubernetes自动伸缩和HPA</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/MonitorAutoScale/observabilityPrometheus/" class="">可观测性-Prometheus</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/MonitorAutoScale/observabilityPrometheusHA/" class="">可观测性-Prometheus  HA</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/MonitorAutoScale/k8sObservability/" class="">可观测性-Kubernetes</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>生产化</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <span>Available</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/Available/k8sHA/" class="">K8S高可用-控制面</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/Available/k8sAvailable/" class="">K8S高可用-零停机[自主中断]</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/Available/k8sAvailableHealth/" class="">K8S高可用-零停机[探针]</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>集成</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/Integration/k8sAppMigrate/" class="">K8S 应用迁移至K8S</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/Integration/k8sSpringcloud/" class="">K8s 集成Springcloud</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/linuxKernelParam/" class="">虚拟机和容器中的内核参数 kernel</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Production/k8sUpgrade/" class="">Kubernetes 升级upgrade</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>PaaS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sPaaS/" class="">Kubernetes PaaS平台</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sOpenShift/" class="">Kubernetes OpenShift</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sMultiTenancy/" class="">Kubernetes 多租户</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sRBAC/" class="">Kubenetes RBAC</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sMultiCluster/" class="">Kubernetes 多集群管理</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sVM/" class="">Kubernetes和VM</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>安全</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Security/k8sSecurity/" class="">Kubernetes安全-Security</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Security/k8sCKS/" class="">Kubernetes CKS</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/www6vKubernetes/docs/Kubernetes/Security/k8sSecurityPractice/" class="">Kubernetes 安全实践</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/www6vKubernetes/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>云原生</h3>

  <label for="toc-control">
    
    <img src="/www6vKubernetes/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          <span>39</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/security/">Security</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/metric/">Metric</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/KV/">KV</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/ceph/">Ceph</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/kernel/">Kernel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/linux/">Linux</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%8F%82%E6%95%B0/">参数</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/prometheus/">Prometheus</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/linux/">Linux</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sNetwork/">Kubernetes网络</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>August 23, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>一. 容器和容器之间的网络 # 使用Docker的一种网络模型：–net=container 每个Pod容器有有一个pause容器 Pause容器 例子 Kubernetes之Pause容器 Kubernetes之“暂停”容器 二. Pod与Pod之间的网络 # 2.0 Overview # 2.1 同节点pod通信 # 基础: 网桥 bridge
通过网桥通信
图2. 同节点pod通信
2.2 不同节点中的Pod通信（跨主机网络通讯） # 2.2.1 Overlay (Flannel方案) # flannel-UDP模式(三层overlay) 原理： fannelId进程封装/解开虚拟网卡docker0,fannel0的数据; 三层的overlay网络; 组件： TUN设备是3层的虚拟网络设备 ; fannel0 劣势: 三次用户态和内核态切换 ; 性能差， 已弃用 图3. flannel-UDP模式
图4. flannel-UDP模式
flannel-vxlan模式(两层虚拟网络) VXLAN 的覆盖网络的设计思想是：在现有的三层网络之上，“覆盖”一层虚拟的、由内核 VXLAN 模块负责维护的二层网络，使得连接在这个 VXLAN 二层网络上的“主机”（虚拟机或者容器都可 以）之间，可以像在同一个局域网（LAN）里那样自由通信 组件： VTEP（VXLAN Tunnel End Point）设备; fannel.1; 组成一个虚拟的两层网络 优势： 进行封装和解封装的对象，是二层数据帧（Ethernet frame）; 而且这个工作的执行流程，全部是在内核里完成的（因为VXLAN本身就是内核中的一个模块）; 主流的网络容器方案。 图5. flannel-vxlan模式
        <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sNetwork/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Schedule/k8sScheduler/">Kubernetes调度器</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>June 9, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>资源调度泛型 [1] # 调度系统泛型
类型 资源选择 排他性 分配粒度 集群策略 中央调度器 全局 无，时序 全局策略 严格的优先级(抢占式) 两层调度调度器 动态资源集 悲观锁 增量囤积 严格公正 共享状态 全局 乐观锁 调度器策略 优先级抢占 表1. 常见调度器的比较
Kubernetes 资源调度[2] # Kubernetes 调度的两个阶段[4][5] # 基于谓词和优先级的调度器（Predicates and Priorities） · v1.0.0 ~ v1.14.0 # 调度器扩展（Scheduler Extender） · v1.2.0 - Scheduler extension
通过调用外部调度器扩展的方式改变调度器的决策；
Map-Reduce 优先级算法 · v1.5.0 - MapReduce-like scheduler priority functions
为调度器的优先级算法支持 Map-Reduce 的计算方式，通过引入可并行的 Map 阶段优化调度器的计算性能；
基于调度框架的调度器（Scheduling Framework） · v1.15.0 ~ 至今 # 调度框架认为 Kubernetes 中目前存在调度（Scheduling）和绑定（Binding）两个循环：
        <a href="/www6vKubernetes/docs/Kubernetes/Schedule/k8sScheduler/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Production/Integration/k8sSpringcloud/">K8s 集成Springcloud</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>April 15, 2023</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Case1[2] # 架构 nginx 结合 springcloud gateway erueka + 本地配置 Case2[1] # 架构 k8s ingress 结合spring gateway spring-admin做服务注册, ConfigMap做服务配置 Case3[3] # 架构
k8s ingress 结合 zuul Eureka做服务注册， ConfigServer做服务配置 网关 候选
zuul 需要使用 Ingress中配置路由很麻烦 服务配置 候选
环境变量 Service mysql-svc ConfigMap apollo 服务注册
老项目 改动Eureka会有风险，建议保留 Eureka 新项目 [4] 用istio envoy side 做 服务发现 候选 Service 基于CoreDNS的服务发现 Env 基于环境变量的服务发现 参考 # 云原生Java架构师的第一课K8s+Docker+KubeSphere+DevOps 166 V 项目Repo git
SpringCloud微服务电商系统在Kubernetes集群中上线详细教程 用的都是Deployment ，需要部署成StatefulSet
kubernetes架构师课程 P195-P200 V
        <a href="/www6vKubernetes/docs/Kubernetes/Production/Integration/k8sSpringcloud/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Schedule/k8sAdvancedScheduling/">Kubernetes 高级调度</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>May 27, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>高级调度 Overview [2] # Affinity vs. Taint [2] # 就污点而言,它的使用通常是负向的, 也就说, 污点常用在某Node不让大多数Pod调度只让少部分Pod调度时,又或者节点根本不参加工作负载时。比如:我们常见的master节点上不调度负载pod,保证master组件的稳定性；节点有特殊资源，大部分应用不需要而少部分应用需要,如GPU。
就Node Affinity来说,他的使用可以正向的,也就是说,我们想让某个应用的Pod部署在指定的一堆节点上。当然,也可以是负向的,比如说我们常说的Node 反亲和性,只需要把操作符设置为NotIn就能达成预期目标。
就污点而言，如果节点设置的污点效果是NoSchedule或者NoExecute,意味着没有设置污点容忍的Pod绝不可能调度到这些节点上。
就Node Affinity而言,如果节点设置了Label,但是Pod没有任何的Node Affinity设置,那么Pod是可以调度到这些节点上的。
特性 默认 优/劣势 taint 负向的 设置NoSchedule， 默认不可调度 不要改现有pod[2] 亲和，反亲和 正向的 设置了Label， 默认可调度 要改现有pod[2] 亲和性 # NodeAffinity配置[1]
NodeAffinity配置分类: requiredDuringSchedulingIgnoredDuringExecution (强亲和性) preferredDuringSchedulingIgnoredDuringExecution (首选亲和性) Topology [3] # topologyKey
参考 # Kubernetes高级调度- Taint和Toleration、Node Affinity分析 详解 K8S Pod 高级调度 kubernetes架构师课程 P97 P98 *** 【2023】云原生Kubernetes全栈架构师：基于世界500强的k8s实战课程 1xx. Kubernetes之Pod调度 未
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sCalico/">Calico</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>May 3, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>一. 介绍和原理 # calico 是容器网络的又一种解决方案，和其他虚拟网络最大的不同是，它没有采用 overlay 网络做报文的转发，提供了纯 3 层的网络模型。三层通信模型表示每个容器都通过 IP 直接通信，中间通过路由转发找到对方。在这个过程中，容器所在的节点类似于传统的路由器，提供了路由查找的功能。
要想路由工作能够正常，每个虚拟路由器（容器所在的主机节点）必须有某种方法知道整个集群的路由信息，calico 采用的是 BGP 路由协议，全称是 Border Gateway Protocol。
BGP(Border Gateway Protocol 边界网关协议): 就是在大规模网络中实现节点路由信息共享的一种协议
BGP 协议传输的消息+ 1 [BGP 消息]+ 2 我是宿主机 192.168.1.3+ 3 10.233.2.0/24 网段的容器都在我这里 + 4 这些容器的下一跳地址是我 二. 组件 # Calico 的 CNI 插件
Felix 它是一个 DaemonSet，负责在宿主机上插入路由规则(即:写入 Linux 内核的 FIB 转发信息库)，以及维护 Calico 所需的网络设备等工作。
路由规则(核心) &lt;目的容器 IP 地址段&gt; via &lt;网关的 IP 地址&gt; dev eth0 iptables的配置组件Felix; 基于iptable/linux kernel包转发; 根据iptables规则进行路由转发; BIRD， 路由广播组件BGP Speaker BIRD是 BGP 的客户端，专门负责在集群里分发路由规则信息。 三.
        <a href="/www6vKubernetes/docs/Kubernetes/Network/k8sCalico/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Production/Available/k8sAvailable/">K8S高可用-零停机[自主中断]</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>April 5, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>
自主中断和非自主中断[4] # PodDisruptionBudged [4] # 无状态应用： maxUnavailable = 40% 单实例有状态应用: 多实例有状态应用： etcd N, maxUnavailable=1 或者 minAvailable=N 参考 # 模块十一： 将应用迁移至Kubernetes平台 使用 PDB 避免 Kubernetes 集群中断 未 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Security/k8sCKS/">Kubernetes CKS</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 15, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>, 
      <a href="/www6vKubernetes/categories/security/">Security</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Cluster Setup - 10% # Securing a Cluster # 使用网络安全策略来限制集群级别的访问 Use Network security policies to restrict cluster level access 使用CIS基准检查Kubernetes组件(etcd, kubelet, kubedns, kubeapi)的安全配置 Use CIS benchmark to review the security configuration of Kubernetes components (etcd, kubelet, kubedns, kubeapi) Kube-bench - Checks whether Kubernetes is deployed securely by running the checks documented ain the CIS Kubernetes Benchmark. 正确设置带有安全控制的Ingress对象 Properly set up Ingress objects with security control 保护节点元数据和端点 Protect node metadata and endpoints Using Kubernetes network policy to restrict pods access to cloud metadata This example assumes AWS cloud, and metadata IP address is 169.
        <a href="/www6vKubernetes/docs/Kubernetes/Security/k8sCKS/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/Storage/k8sRook/">Kubernetes Rook</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 12, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Rook for ceph # Rook建立Ceph集群流程[1] # rook的crd建立好之后，
Rook的operator会把rook的控制面建立出来
然后把storageclass和csi driver都注册好。
用户只要建立pvc，pvc里指定用哪个storageclass，然后csi driver会去工作。
Rook cluster installation [2][3] [I] # Ceph存储类型 # Block FileSystem Object Block Storage [4][5] [II] # install apiVersion: ceph.rook.io/v1 kind: CephBlockPool metadata: name: replicapool namespace: rook-ceph spec: failureDomain: host replicated: size: 3 --- apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: rook-ceph-block # Change &#34;rook-ceph&#34; provisioner prefix to match the operator namespace if needed provisioner: rook-ceph.rbd.csi.ceph.com parameters: # clusterID is the namespace where the rook cluster is running clusterID: rook-ceph # Ceph pool into which the RBD image shall be created pool: replicapool .
        <a href="/www6vKubernetes/docs/Kubernetes/Storage/k8sRook/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/ServicesDNS/k8sDNS/">Kubernetes CoreDNS</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 12, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>
CoreDNS插件架构 # github中
Kubernetes DNS # Kubernetes服务发现 自定义域名解析 # hosts: 存量代码域名调用 rewrite: 集群外服务调用 forward： 配置存根域 CoreDNS 部署架构 # kubesphere.local prod.kubesphere.local dev.kubesphere.local qa.kubesphere.local test.kubesphere.local reference: # 【Meetup 分享】使用 KubeSphere &amp; CoreDNS 搭建云原生 DNS 详解 DNS 与 CoreDNS 的实现原理 未 
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sOpenShift/">Kubernetes OpenShift</a>
    </h2>
    
  <div class="flex align-center text-small book-post-date">
    <img src="/www6vKubernetes/svg/calendar.svg" class="book-icon " alt="" />
    <span>January 5, 2022</span>
  </div>



  
  <div class="text-small">
    
      <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>, 
      <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
  </div>
  


    <p>Interface # CNI
OpenFlow(OVS)(使用的， 更通用，场景适合的更多)
Calico CRI OpenShift3.0 用的
Docker（有守护进程，守护进程宕掉后，运行时会有问题）
Red Hat Enterprise Linux - 4G大小 OpenShift4.0 用的
CRI-O（没有守护进程）
Ret Hat CoreOS - 不到800M大小 CSI
CEPH(ROOK)
NFS 入口 ingress openshift 默认是haproxy的ingress（首选建议使用， dns解析， mTLS） 也可以装nginx ingress 也可以装istio ingress gateway（4层选， istio ingress gateway） PaaS # 角色 - RBAC
配置管理 - LimitRanage， Quota
联邦集群 - kubefed
对K8S的增强 # Operator Multus多个虚拟网卡（用的多）
一个pod有多个虚拟网卡， ovs管理网络 + macvlan网络（性能比较好） kube-virt 虚拟机管理 应用迁移 # 应用改造的难度比较大 多云 # 基于多云的CI/CD # 基于jenkins
        <a href="/www6vKubernetes/docs/Kubernetes/PaaS/k8sOpenShift/">...</a>
      
    </p>
  </article>
  

  
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/3/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/page/4/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <nav>
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          <span>39</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/security/">Security</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/metric/">Metric</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/KV/">KV</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/ceph/">Ceph</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/kernel/">Kernel</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/linux/">Linux</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/categories/%E5%8F%82%E6%95%B0/">参数</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/Kubernetes/">Kubernetes</a>
          <span>38</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/prometheus/">Prometheus</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/etcd/">Etcd</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/%E5%AD%98%E5%82%A8/">存储</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/www6vKubernetes/tags/linux/">Linux</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












